<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>SCAST</title>

    <script src="./lib/acorn.js"></script>

    <script src="./lib/filbert.js"></script>

    <link rel="stylesheet" href="./scast.css">
    <link rel="stylesheet" href="./lib/vs2015.min.css">
    <script src="./lib/highlight.min.js"></script>
    <script src="./lib/highlightjs-line-numbers.min.js"></script>
    <script src="./lib/json-viewer.bundle.js"></script>

    <script src="./lib/d3.min.js"></script>
    <script src="./js/D3M.js"></script>
    <script src="./lib/mermaid.min.js"></script>

    <script src="./js/SCAST.js"></script>
    <script src="./js/SCASTPY.js"></script>
    <script src="./js/SCASTJS.js"></script>
    <script src="./js/common.js"></script>
    <script src="./js/ai.js"></script>
    <script src="./js/analysis.js"></script>
</head>

<body style="margin-bottom: 90px;">
    <div id="title" style="position: fixed;left:10px;bottom: 10px;z-index: 999;">
        <span class="pointer jump"
            onclick="scrollToView('load',-60)">ï¸ğŸ”±</span>
        <h1 style="display: inline;" class="pointer"> SCAST </h1>
        <span class="pointer jump"
            onclick="javascript:void(document.getElementById('code_con').open=!document.getElementById('code_con').open)">ğŸ§¾</span>
        <span class="pointer jump"
            onclick="scrollToView('mermaidHead',-window.innerHeight/2-20)">ğŸ§œâ€â™€ï¸</span>
        <span class="pointer jump"
            onclick="scrollToView('mermaidUML',-window.innerHeight/2-20)">ğŸ“‡</span>
        <span class="pointer jump"
            onclick="scrollToView('mermaidFlow',-window.innerHeight/2-20)">ğŸŒŠ</span>
        <span class="pointer jump"
            onclick="scrollToView('FDP',-window.innerHeight/2-20)">â„ï¸</span>
        <span class="pointer jump"
            onclick="scrollToView('D3Select',-window.innerHeight/2-20)">ğŸŒ³</span>
        <span class="pointer jump"
            onclick="javascript:void(document.getElementById('outline_con').open=!document.getElementById('outline_con').open)">ğŸ‘ï¸â€ğŸ—¨ï¸</span>
        <a href="https://davidkingzyb.github.io/blogmd/50.html"> by DKZ</a>
    </div>
    <div class="m10" id="load_con">
        <input type='file' id='codefile' multiple />
        <button id="load" class="pointer" onclick="load()" title="generate AST">ğŸ”±</button>
        <button id="ai" class="pointer" onclick="aiAnalysis()" title="AI Analysis">ğŸ¦™</button>
    </div>
    <div class="m10">
        <textarea name="" style="width: 90%;height: 100px;" id="codetext"></textarea>
    </div>
    <details id="code_con" open>
        <summary>codes <a onclick="javascript:void(document.getElementById('code_con').style.maxHeight='90%')" title="max height">â†•ï¸</a></summary>
        <div id="code"></div>
    </details>
    <details id="outline_con" open>
        <summary>outline</summary>
        <div id="mmdfilter_con" class="opclsfilter"></div>
    </details>
    <details>
        <summary onclick="showJson()">json
            <input id="searchinput" type="text">
            <button onclick="search()" title="search">ğŸ”</button>
            <button onclick="storageAstJson()" title="save Ast json to storage">ğŸ“¥</button>
            <button onclick="loadAstJson()" title="load Ast json from storage">ğŸ“¤</button>
            <button onclick="saveScast()" title="save Ast json">ğŸ’¾</button>
        </summary>
        <json-viewer id="json"></json-viewer>
    </details>
    <details open>
        <summary id="mermaidHead">mermaid UML & Flow
            <button onclick="genMermaid()" title="generate mermaid">ğŸ§œâ€â™€ï¸</button>
            <button onclick="reMermaid()" title="refresh mermaid uml">ğŸ”„ï¸</button>
            <button onclick="storageMermaid()" title="save mermaid to storage">ğŸ“¥</button>
            <button onclick="loadMermaid()" title="load mermaid from storage">ğŸ“¤</button>
            <button onclick="saveMermaid()" title="save mermaid uml">ğŸ’¾</button>
            <button onclick="scaleMermaid()" title="scale mermaid">ğŸ”›</button>
        </summary>
        <div id="mermaidOption" class="opcls">
            <input type="checkbox" id="mmdop_relation" class="mmdops" checked /><label for="mmdop_relation">UML
                Relationship</label>
            <input type="checkbox" id="mmdop_method" class="mmdops" checked /><label for="mmdop_method">OOP</label>
            <input type="checkbox" id="mmdop_call" class="mmdops" checked /><label for="mmdop_call">Call Detail</label>
            <input type="checkbox" id="mmdop_idone" class="mmdops" checked /><label for="mmdop_idone">One ID</label>
            <input type="checkbox" id="mmdop_if" class="mmdops" /><label for="mmdop_if">If and Loop</label>
            <input type="checkbox" id="mmdop_condition" class="mmdops" /><label for="mmdop_condition">Condition</label>
            <input type="checkbox" id="mmdop_namespace" class="mmdops" /><label for="mmdop_namespace">use
                Namespace</label>
        </div>
        <textarea name="" id="textUML" style="width: 45%;height:250px;"></textarea>
        <textarea name="" id="textFlow" style="width: 45%;height:250px;"></textarea>
        
        <div id="mermaidPane">
            <pre class="mermaid" id="mermaidUML"></pre>
            <pre class="mermaid" id="mermaidFlow"></pre>
        </div>
        <div id="FDP"></div>
    </details>
    <details open>
        <summary>D3 Tree & Diagram
            <select id="D3Select">
                <option value="IndentedTree">IndentedTree</option>
                <!-- <option value="treeMap">TreeMap</option> -->
                <option value="TidyTree">TidyTree</option>
                <option value="ClusterTree">ClusterTree</option>
                <option value="RadialTidyTree">RadialTidyTree</option>
                <option value="RadialClusterTree">RadialClusterTree</option>
                <option value="forceDirectedTree">ForceDirectedTree</option>
                <option value="EdgeBundling">EdgeBundling</option>
            </select>
            <button onclick="genD3()" title="generate D3">ğŸŒ³</button>
            <button onclick="clearD3()" title="clear D3">ğŸ§¹</button>
            <button onclick="scaleD3()" title="scale D3">ğŸ”›</button>
            <button onclick="fontSizeD3Minus(4)" title="scale D3 font size">â–</button>
            <button onclick="fontSizeD3Plus(4)" title="scale D3 font size bigger">â•</button>
        </summary>
        <div id="D3Option" class="opcls"></div>
        <div id="D3Diagram"></div>
    </details>

</body>
<script>
    initFile()


    mermaid.initialize({ startOnLoad: false,securityLevel: 'loose', });
    renderD3Option()

    
</script>

</html>